<!DOCTYPE html><html lang="en"> <head><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v4.1.3"><title>活版印字</title><meta charset="utf-8"><link rel="canonical" href="https://revysr.github.io/"><meta name="description" content="Rediscory the beauty of typography"><meta name="robots" content="index, follow"><meta property="og:title" content="活版印字"><meta property="og:type" content="article"><meta property="og:image" content="https://github.com/moeyua/astro-theme-typography/blob/85204bceb6dbc1314dd5d5e4ae5773af01ddea79/public/typograph-og.jpg"><meta property="og:url" content="https://revysr.github.io/"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><meta content="https://github.com/moeyua/astro-theme-typography/blob/85204bceb6dbc1314dd5d5e4ae5773af01ddea79/public/typograph-og.jpg" name="twitter:image"><meta content="活版印字" name="twitter:title"><meta content="Rediscory the beauty of typography" name="twitter:description"><link rel="stylesheet" href="/_astro/about.NTXzv6ay.css" /></head> <body> <div un-max-lg="animate-fadein-down" un-lg="flex flex-row-reverse justify-center gap-4 px-8" class="container contain-layout m-a"> <div un-lg="sticky top-0 h-screen py-20 animate-fadein-left gap-8" un-lg:flex="~ col justify-between items-start gap-4" class="p-7.5"> <header un-lg="grow-1 justify-between items-start" un-flex="~ col gap-2.5" class="text-center"> <hgroup un-hover:lg="bg-foreground color-background pt-3.75 pb-8.75 " un-lg=" write-vertical-right items-start px-2.5 pb-12 b-l-2px b-l-foreground-solid text-left" un-flex="~ col gap-2.5" class="cursor-pointer transition-[padding,background] duration-800 ease-in-out"> <a class="normal" href="/"> <h3 class="text-5 font-extrabold font-serif">Typography</h3> <h1 class="text-8 font-extrabold font-serif">活版印字</h1> </a> </hgroup> <nav class="text-center font-bold" un-flex="~ col gap-2"> <ul un-lg="flex-col items-start text-4" class="text-3.5" un-flex="~ row gap-2 justify-center"> <li> <a href="/posts/page/1">Posts</a> </li><li> <a href="/archive">Archive</a> </li><li> <a href="/categories">Categories</a> </li><li> <a href="/about">About</a> </li> </ul> <ul un-flex="~ row gap-1 justify-center"> <li> <a href="https://github.com/moeyua/astro-theme-typography" target="_blank" title="github" class="icon i-mdi-github"></a> </li><li> <a href="/atom.xml" target="_blank" title="rss" class="icon i-mdi-rss"></a> </li><li> <a href="https://github.com/moeyua/astro-theme-typography" target="_blank" title="twitter" class="icon i-mdi-twitter"></a> </li><li> <a href="https://github.com/moeyua/astro-theme-typography" target="_blank" title="mastodon" class="icon i-mdi-mastodon"></a> </li> </ul> </nav> </header> <footer font-bold text-3 un-flex="~ col gap-1" un-lg="gap-3.5" class="max-lg:hidden"> <p>
© 2025 <a target="_blank" href="https://revysr.github.io/" rel="noopener noreferrer">Typography</a> </p> <p>
Theme
<a target="_blank" href="https://github.com/Moeyua/astro-theme-typography" rel="noopener noreferrer">Typography</a>
by <a target="_blank" href="https://moeyua.com" rel="noopener noreferrer">Moeyua</a> </p> <p>
Proudly published with
<a target="_blank" href="https://astro.build" rel="noopener noreferrer">Astro</a> </p> </footer> </div> <main un-lg="py-20 min-w-xl animate-fadein-down" class="p-7.5">  <section contain-layout un-flex="~ col gap-7.5"> <article class="heti"> <header> <h1 class="post-title!"> <a href="/posts/20210218-systemd-nspawn-chroot/">systemd-nspawn 容器使用</a> </h1> <div class="mt-2 text-3.5"> <span>Posted at</span> <time>2021-02-18</time> <a class="ml-2.5" href="/categories/systemd"># systemd</a><a class="ml-2.5" href="/categories/container"># container</a><a class="ml-2.5" href="/categories/ubuntu"># ubuntu</a> </div> </header>  <p class="line-clamp-4">简介
systemd-nspawn 比 chroot 可以启动 systemd 但是要求目标系统有 systemd
安装

systemd-nspawn systemd 自带
debootstrap 部署 debian 系发行版工具 要求 root 下使用

emerge -av debootstrap

部署 Ubuntu
OS=ubuntu
ARCH=amd64
VERSION=focal
cd $WORKSPACES
mkdir $OS
debootstrap --arch=$ARCH $VERSION $OS https://opentuna.cn/ubuntu/

部署 Deepin
# 默认没有 apricot 脚本 需要去 link 到 gutsy
OS=deepin
ARCH=amd64
VERSION=apricot

cd /usr/share/debootstrap/</p>  </article><article class="heti"> <header> <h1 class="post-title!"> <a href="/posts/20210214-samba-in-gentoo/">Gentoo 上配置 Samba</a> </h1> <div class="mt-2 text-3.5"> <span>Posted at</span> <time>2021-02-14</time> <a class="ml-2.5" href="/categories/gentoo"># gentoo</a><a class="ml-2.5" href="/categories/samba"># samba</a> </div> </header>  <p class="line-clamp-4">安装 Samba
# /usr/portage/package.use 配置 USE
# samba
net-fs/samba -cups -client -system-mitkrb5 # 移除域控和不必要的依赖
sys-libs/ldb -ldap # 移除域控
# Install Samba
emerge --ask --noreplace net-fs/samba

配置 Samba
创建要共享的 Samba 目录并配置 smb.conf
# /etc/samba/smb.conf
[anime]
path = /data/bt/downloads
public = yes
writable = yes
valid users = ${USER} # 替换成对应用户
create mask = 0644
force create mode = 0644
directory mask</p>  </article><article class="heti"> <header> <h1 class="post-title!"> <a href="/posts/20210213-clash-tproxy/">clash-tproxy 设置网关代理</a> </h1> <div class="mt-2 text-3.5"> <span>Posted at</span> <time>2021-02-13</time> <a class="ml-2.5" href="/categories/clash"># clash</a><a class="ml-2.5" href="/categories/tproxy"># tproxy</a><a class="ml-2.5" href="/categories/iptables"># iptables</a><a class="ml-2.5" href="/categories/yacd"># yacd</a> </div> </header>  <p class="line-clamp-4">config.yml 配置
增加 redir-port tproxy-port
#!/usr/bin/env bash
rm -f config.yaml
wget -O config.yaml ${URL}

sed -i &#39;s/port: 7890/port: 8888/&#39; config.yaml
sed -i &#39;s/socks-port: 7891/socks-port: 8889/&#39; config.yaml
sed -i &#39;3 s/^/redir-port: 8890\n/&#39; config.yaml
sed -i &#39;4 s/^/tproxy-port: 8891\n/&#39; config.yaml
sed -i &#39;s/external-controller: :9090/external-controller: 0.0.0.0:6170/g&#39; config.yaml

启动 clash</p>  </article><article class="heti"> <header> <h1 class="post-title!"> <a href="/posts/20200810-zfs-replace-update/">ZFS替换与升级</a> </h1> <div class="mt-2 text-3.5"> <span>Posted at</span> <time>2020-08-10</time> <a class="ml-2.5" href="/categories/zfs"># zfs</a><a class="ml-2.5" href="/categories/linux"># linux</a> </div> </header>  <p class="line-clamp-4">替换原因
我原来使用 360G 的鱼竿厂硬盘作为 ZFS 根目录, 现在觉得这个操作比较危险, 所以购入了两块 PM981a 做系统盘. 两块盘做了mirror-0
替换
创建完分区(因为有 EFI 所以不能全盘 ZFS)后 执行以下命令
zpool replace rpool sda2 /dev/nvme0n1p2

gentoo-zh 频道的人说需要 detach 旧盘
我个人操作完毕感觉旧硬盘自动被 detach 了
添加镜像盘
zpool attach rpool nvme0n1p2 nvme1n1p2  

这样就添加完 mirror
扩容
# 自动扩容
zpool set autoexpand=on rpool
zpool online -e rpool nvme0n1p2
zpool online -e rpool nvme1n1p2

额外
旧的 EFI 分区应该迁移到新硬</p>  </article><article class="heti"> <header> <h1 class="post-title!"> <a href="/posts/20200515-android-development/">Android-Development</a> </h1> <div class="mt-2 text-3.5"> <span>Posted at</span> <time>2020-05-15</time> <a class="ml-2.5" href="/categories/Android"># Android</a> </div> </header>  <p class="line-clamp-4">卷首
想学习一技之长，所以选择了Android
Android Build 踩坑
依赖
sys-libs/ncurses-compat
dev-util/gperf
media-libs/mesa vulkan
media-libs/vulkan-loader X


在Gentoo上首先遇到的问题是
JAVAC does not match between Make and Soong

解决办法是
unset JAVAC

</p>  </article> <footer class="mt-5">  <p class="flex items-center gap-2">  <span class="inline-flex items-center"> <a href="posts/page/1">All Posts</a> <i class="i-mdi-chevron-double-right icon"></i> </span> </p> </footer> <!-- <footer class="mt-5">
  <p class="mb-2.5">{t('page_number', page.currentPage)} / {t('page_count', page.lastPage)}</p>
  <p class="flex items-center gap-2">
    <span class="inline-flex items-center">
      <i class="i-mdi-chevron-double-left icon"></i>
      {page.url.prev ? <a href={page.url.prev}> {t('prev')} </a> : <span>{t('prev')}</span>}
    </span>

    <span class="inline-flex items-center">
      {page.url.next ? <a href={page.url.next}>{t('next')}</a> : <span>{t('next')}</span>}
      <i class="i-mdi-chevron-double-right icon"></i>
    </span>
  </p>
</footer> --> </section>  </main> <footer font-bold text-3 un-flex="~ col gap-1" un-lg="gap-3.5" class="lg:hidden p-7.5"> <p>
© 2025 <a target="_blank" href="https://revysr.github.io/" rel="noopener noreferrer">Typography</a> </p> <p>
Theme
<a target="_blank" href="https://github.com/Moeyua/astro-theme-typography" rel="noopener noreferrer">Typography</a>
by <a target="_blank" href="https://moeyua.com" rel="noopener noreferrer">Moeyua</a> </p> <p>
Proudly published with
<a target="_blank" href="https://astro.build" rel="noopener noreferrer">Astro</a> </p> </footer> </div> </body></html>